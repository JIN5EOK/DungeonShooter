# 개요
> 게임오브젝트 오브젝트 풀링에 대한 설계 문서입니다.

- 각 오브젝트 팩토리들 (EnemyFactory등)이 풀과의 통신을 담당, 각 오브젝트의 사용자들은 크게 오브젝트 풀의 존재를 신경 쓸 필요 없게 하기
---

# 설계

```mermaid
classDiagram
    class ObjectPoolManager["ObjectPoolManager<br>오브젝트 풀 매니저"]{
        -poolMap Dictionary~int, IObjectPool< GameObject >~
        +Get(int id, GameObject prefab) GameObject
        +Release(int id, GameObject go) void
    }
    
    class EnemyFactory["EnemyFactory<br>오브젝트 팩토리들"]{
        
    }
    
    class PoolableComponent["PoolableComponent<br>풀링 게임오브젝트에 붙는 컴포넌트"]{
        +Id : int
        +Release() void
    }
    
    class Enemy["Enemy<br>적 게임오브젝트"]{
        +Die() void
    }
    
    EnemyFactory --> ObjectPoolManager : 풀 매니저에 생성 팩토리 로직 Regist\n오브젝트 생성시 풀 매니저를 거쳐 생성
    사용자 --> EnemyFactory : 오브젝트 풀링 구조는 모른채 Enemy 제공 받음
    사용자 --> Enemy : 객체 사용후 파괴 함수 호출
    
    Enemy --> PoolableComponent : PoolableComponent가 있다면 Release 호출하여 반환, 없다면 그냥 파괴
```

- `ObjectPoolManager`
    - Table ID:ObjectPool 형식으로 풀을 관리한다
        - 예: Skill 14000101 : ObjectPool
        - 스킬 14000101 게임오브젝트 인스턴스에 대한 Pool
    - `Get<GameObject>(int id, GameObject prefab)`
        - 만약 새로운 객체를 생성해야한다면 넘긴 프리팹을 통해 생성
        - 풀 안에 있다면 풀 안의 객체 반환
    - `Release(int id, GameObject go)`
      - 풀 안에 반환
- `PoolableComponent` : 풀링 오브젝트에 붙는 컴포넌트
    - int Id // 오브젝트 풀 Id
    - void Release() : 풀에 반환