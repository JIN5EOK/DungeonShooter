# 개요
> 아이템과 인벤토리 시스템 전반에 대한 설계 문서입니다

# 아이템, 인벤토리 기능
* 인벤토리 스펙
    * 장착 아이템 슬롯
        * 1개의 무기 슬롯
	        * 스텟 데이터
            * 무기 공격 스킬
				* 예시 - 장창, 일반 공격 스킬 - 찌르기
    * 인벤토리 영역
        * 아이템들이 저장되는 공간
        * 액티브 아이템, 무기, 소비 아이템이 저장된다
* 아이템들의 고유 특징
    * 무기
	    * 무기 슬롯에 장착 가능
	        * 해제하기 위해서는 다른 무기를 장착해야 한다
		* 공격버튼, 필살기 버튼을 눌러 공격할 수 있다
    * 패시브
        * 소지하면 지속적으로 효과가 부여된다
      * 소비
          * 인벤토리에서 사용하면 효과가 실행된다

# 다이어그램

### 인벤토리와 아이템 인스턴스 관계도
```mermaid
classDiagram
	class ItemType["ItemType<br>아이템 타입"]{
		Weapon
		Passive
		Consume
	}
    class ItemTableEntry["ItemTableEntry<br>아이템 수치 테이블 데이터"]{
	    +Id : int
	    +ItemName : string
        +ItemDescription : string
	    +ItemType ItemType
	    +MaxStackCount : int
	    +UseSkillId : int // SkillTableEntry 아이디
	    +PassiveSkillId : int // SkillTableEntry 아이디
	    +EquipSkillId : int // SkillTableEntry 아이디
        +ActiveSkillId : int // SkillTableEntry 아이디
	    +ItemIcon : string // Sprite 주소
	    +HpAdd : int // 체력 수치 보너스
	    +HpMultiply : int // 체력 배율 보너스
	    ... // 그외 스탯 보너스
    }
    
	class Item["Item<br>생성된 아이템 인스턴스"]{
        +ItemTableEntry : ItemTableEntry
        +StackCount : int
        +UseSkill : Skill // 소모 액티브 스킬
        +PassiveSkill : Skill // 소지 패시브 스킬
        +EquipSkill : Skill // 장착 패시브 스킬
        +ActiveSkill : Skill // 장착 액티브 스킬
        // ItemTableEntry의 ID를 기반으로 생성된 스킬 인스턴스들
        // 그 외 필요시 해당 아이템 인스턴스만의 고유 효과,정보가 있다면 추가
    }

    class Inventory["Inventory<br>장착/소지 아이템 관리 인벤토리"]{
        +EquippedWeapon : Item
        +Items : IReadonlyList~Item~
        +AddItem(Item item) void
        +EquipItem(Item item) void
        +UseItem(Item item) void
    }
	
	class ItemFactory["ItemFactory<br>Item 인스턴스 생성 담당"]{
        +CreateItemAsync(int itemEntryId) UniTask~Item~
    }
	
    
    ItemTableEntry --> ItemType
    ItemTableEntry <-- Item : 원본 데이터 참조
    Item <-- Inventory : 소유,관리
    Item <-- ItemFactory : ItemTableEntry기반 Item 인스턴스 생성
```


### 필드 아이템 (드롭 아이템) 상호작용 구조
```mermaid
classDiagram
	플레이어게임오브젝트 *-- InteractableComponent
    InteractableComponent --> "Interact(획득)" IInteractable
    IInteractable <|.. FieldItem
    Inventory <-- "AddItem(인벤토리에 아이템 추가)" FieldItem

    class Inventory["Inventory<br>장착/소지 아이템 관리 인벤토리"]{
        +AddItem(item) void
    }

    class IInteractable["IInteractable<br>상호작용 인터페이스"]{
        +Interact() void
    }

    class FieldItem["FieldItem : Monobehaviour<br>드랍된 필드 아이템"]{
        +item : item
        +Interact() void
    }
```
