## 로딩 시스템
> 로딩이 필요한 상황에 로딩창을 띄워 미완성된 게임 상황 노출, 플레이어의 클릭등을 막는다

## 로딩 윈도우, 로딩 스피너
- 로딩 윈도우: 화면 전체를 가리는 로딩 윈도우, 씬 이동 등 묵직한 로딩 작업에 사용된다
- 로딩 스피너: 화면을 반투명하게 가리는 로딩 스피너, 버튼 클릭후 비동기 대기 같은 가벼운 로딩 작업에 사용된다

```mermaid
classDiagram
    class LoadingType{
        <<Enum>>
        LoadingWindow
        LoadingSpinner
    }
    
    class LoadingTask["LoadingTask<br>로딩 명령 태스크"]{
        +LoadingType LoadingType
        +LoadingTask(LoadingType type, Func~CancellationTokenSource, UniTask~ task)
        +Run() UniTask
    }
    
    class ILoadingService["ILoadingService<br>로딩 명령 실행 주체"]{
        -_windowTasks Queue~LoadingTask~
        -_spinnerTasks Queue~LoadingTask~
        +void EnqueueTask(LoadingTask loadingTask)
    }
    
    class LoadingViewModel{
        +IsWindowVisible : bool
        +IsSpinnerVisible : bool
    }
    
    class LoadingView["LoadingView<br>로딩 뷰"]{
        
    }
    
    
    class 사용자{
        
    }
    
    
    사용자 --> LoadingTask : 생성, 필요하면 취소토큰을 통해 명령 취소
    LoadingViewModel <-- LoadingView : 참조하여 상태에 따라 UI 갱신
    LoadingViewModel <-- ILoadingService : 현재 큐 상태에 따라 상태 변경
    LoadingType --> LoadingTask
    사용자 --> ILoadingService : 로딩 명령 전달
```
## 씬 이동시 깜빡임현상 발생할 수 있음 고려하기
- 씬 이동 로딩 같은 경우 씬 이동 이후 씬 초기화 작업들까지 마친 후에 로딩 화면이 제거되어야 함
  - 해당 부분은 `SceneInitializerBase`라는 개체 상속을 통해 해결, `SceneLoader`를 통한 씬 로딩시 해당 객체가 씬에 있을 경우 초기화를 마칠때까지 기다리는 명령을 자동으로 삽입하도록 처리